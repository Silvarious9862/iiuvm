#include "CmdParser.h"
#include <iostream>

CommandLineOptions CommandLineParser::parse(int argc, wchar_t* argv[]) {
    CommandLineOptions opts;
    for (int i = 1; i < argc; i++) {
        std::wstring arg = argv[i];
        std::wcout << L"Arg[" << i << L"] = " << argv[i] << std::endl;
        if (arg == L"--info") opts.info = true;
        else if (arg == L"--snap") opts.snap = true;
        else if (arg == L"--capture" && i + 1 < argc) {
            opts.capture = true;
            opts.captureSeconds = std::stoi(argv[++i]);
        }
        else if (arg == L"--output" && i + 1 < argc) {
            opts.outputPath = argv[++i];
        }
        else if (arg == L"--quiet") opts.quiet = true;
    }
    return opts;
}
